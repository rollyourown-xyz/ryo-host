# SPDX-FileCopyrightText: 2022 Wilfred Nicoll <xyzroller@rollyourown.xyz>
# SPDX-License-Identifier: GPL-3.0-or-later

datacenter = "{{ host_id }}"
data_dir   = "/var/consul"
domain     = "ryo"

server                = true
bootstrap_expect      = 1

#
# THE FOLLOWING IS EXPERIMENTAL
#client_addr           = "{{ lxd_host_network_part }}.1"   
client_addr           = "{{ host_public_ipv6_prefix }}::{{lxd_host_network_ipv6_subnet}}:1"   

#bind_addr             = "{{ lxd_host_network_part }}.1"
bind_addr             = "{{ host_public_ipv6_prefix }}::{{lxd_host_network_ipv6_subnet}}:1"

#advertise_addr        = "{{ lxd_host_network_part }}.1"
#advertise_addr_ipv4   = "{{ lxd_host_network_part }}.1"
advertise_addr_ipv6   = "{{ host_public_ipv6_prefix }}::{{lxd_host_network_ipv6_subnet}}:1"

#advertise_addr_wan    = "{{ lxd_host_network_part }}.1"
advertise_addr_wan    = "{{ host_public_ipv6_prefix }}::{{lxd_host_network_ipv6_subnet}}:1"

#retry_join_wan        = [ "{{ veth0_network_part }}.1" ]
retry_join_wan        = [ "{{ veth0_network_ipv6_prefix }}::1" ]

# END EXPERIMENTAL
#

retry_interval_wan    = "10s"
reconnect_timeout_wan = "170880h"

# ui_config.enabled = true only for dev/test, false for production
ui_config = {
  enabled = true
}

dns_config = {
  enable_truncate = true
  a_record_limit  = 100
}
